<%= form_with(model: budget, class: "contents") do |form| %>
  <% if budget.errors.any? %>
    <div class="<%= ui_alert_error_class %> mb-4">
      <h2 class="font-medium"><%= pluralize(budget.errors.count, "error") %> prohibited this budget from being saved:</h2>
      <ul class="list-disc ml-6 mt-2">
        <% budget.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="mb-4">
    <%= form.label :category_id, "Category", class: ui_label_class %>
    <%= form.collection_select :category_id, Category.expense.order(:name), :id, :name, { prompt: "Select expense category" }, class: ui_input_class %>
  </div>

  <div class="mb-4">
    <%= form.label :period, "Budget Period", class: ui_label_class %>
    <%= form.select :period, [["Monthly", "monthly"], ["Yearly", "yearly"]], {}, class: ui_input_class %>
    <p class="mt-1 text-sm <%= ui_text_muted_class %>">Monthly budgets reset each month. Yearly budgets track spending for the entire year.</p>
  </div>

  <div class="mb-4">
    <%= form.label :amount, "Budget Amount", class: ui_label_class %>
    <%= form.number_field :amount, step: 0.01, min: 0.01, class: ui_input_class, placeholder: "0.00" %>
  </div>

  <div class="mb-4">
    <%= form.label :start_date, "Start Date (optional)", class: ui_label_class %>
    <%= form.date_field :start_date, class: ui_input_class %>
    <p class="mt-1 text-sm <%= ui_text_muted_class %>">Leave blank to apply to all time. Set a date to only track spending from that month forward.</p>
  </div>

  <div class="flex space-x-4">
    <%= form.submit class: "#{ui_btn_primary_class} cursor-pointer" %>
    <%= link_to "Cancel", budgets_path, class: ui_btn_secondary_class %>
  </div>
<% end %>
