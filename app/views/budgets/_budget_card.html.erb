<div class="p-6">
  <div class="flex justify-between items-start mb-2">
    <div>
      <h3 class="font-semibold text-slate-700"><%= budget.category.name.capitalize %></h3>
      <p class="text-sm text-slate-500">
        <%= number_to_currency(budget.spent(year, month)) %> of <%= number_to_currency(budget.amount) %> spent
        <span class="text-slate-400">(<%= budget.period_label %>)</span>
      </p>
    </div>
    <div class="flex space-x-3 text-sm">
      <%= link_to "Edit", edit_budget_path(budget), class: "text-cyan-600 hover:text-cyan-700 hover:underline" %>
      <%= button_to "Delete", budget, method: :delete, class: "text-rose-500 hover:text-rose-600 hover:underline", data: { turbo_confirm: "Are you sure?" } %>
    </div>
  </div>
  <div class="w-full bg-slate-100 rounded-full h-3">
    <% percentage = [budget.percentage_used(year, month), 100].min %>
    <% bar_color = percentage >= 100 ? 'bg-rose-400' : percentage >= 80 ? 'bg-amber-400' : 'bg-emerald-400' %>
    <div class="<%= bar_color %> h-3 rounded-full transition-all" style="width: <%= percentage %>%"></div>
  </div>
  <div class="flex justify-between mt-1 text-sm">
    <% remaining = budget.remaining(year, month) %>
    <span class="<%= remaining >= 0 ? 'text-emerald-500' : 'text-rose-400' %>">
      <%= remaining >= 0 ? "#{number_to_currency(remaining)} remaining" : "#{number_to_currency(remaining.abs)} over budget" %>
    </span>
    <span class="text-slate-400"><%= budget.percentage_used(year, month) %>%</span>
  </div>
</div>
