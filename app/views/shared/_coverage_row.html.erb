<%# Displays a single account's coverage analysis with gaps %>
<%# Local variables: coverage (hash from coverage_analysis) %>
<div class="border-b border-slate-100 dark:border-slate-700 pb-3 last:border-0 last:pb-0">
  <div class="flex items-center justify-between mb-1">
    <div class="flex items-center gap-2">
      <span class="font-medium text-sm <%= ui_text_class %>"><%= coverage[:account].name %></span>
      <span class="<%= ui_currency_badge_class %>"><%= coverage[:account].currency %></span>
      <span class="<%= ui_text_subtle_class %> text-xs">Expected: <%= coverage[:account].frequency_label %></span>
    </div>
    <%= link_to "Imports", imports_path(account_id: coverage[:account].id), class: "px-2 py-0.5 text-xs bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-600 transition" %>
  </div>
  <div class="space-y-0.5">
    <% coverage[:gaps].each do |gap| %>
      <% gap_start = gap[:start] - 2.days %>
      <% gap_end = gap[:end] + 2.days %>
      <%= link_to transactions_path(account_id: coverage[:account].id, start_date: gap_start, end_date: gap_end), class: "block text-xs text-amber-600 dark:text-amber-400 hover:text-amber-700 dark:hover:text-amber-300" do %>
        âš  Gap: <%= gap[:start].strftime("%b %-d") %> - <%= gap[:end].strftime("%b %-d, %Y") %>
        <span class="<%= ui_text_subtle_class %>">(<%= gap[:days] %> days)</span>
      <% end %>
    <% end %>
  </div>
</div>
