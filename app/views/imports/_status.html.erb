<div id="import_status">
<% if import.pending? || import.processing? %>
  <h2 class="text-xl font-semibold <%= ui_text_class %> mb-2">
    <%= import.pending? ? "Waiting in Queue" : "Analyzing Statement" %>
  </h2>
  
  <p class="<%= ui_text_muted_class %> mb-6">
    <% if import.processing? %>
      <% if import.progress_message.present? %>
        <%= import.progress_message %>
        <% if import.extracted_count.present? && import.extracted_count > 0 %>
          (<%= pluralize(import.extracted_count, "transaction") %> found)
        <% end %>
      <% elsif (progress = import.progress_info) %>
        Processing...
      <% else %>
        AI is extracting and categorizing transactions.
      <% end %>
    <% else %>
      Import is queued and will begin processing shortly.
    <% end %>
  </p>

  <% if import.processing? && (progress = import.progress_info) %>
    <!-- Progress bar -->
    <div class="w-full max-w-xs mx-auto mb-6">
      <div class="flex justify-between text-xs <%= ui_text_muted_class %> mb-1">
        <span>Progress</span>
        <span><%= progress[:percent] %>%</span>
      </div>
      <div class="w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2">
        <div class="bg-cyan-500 h-2 rounded-full transition-all duration-500" style="width: <%= progress[:percent] %>%"></div>
      </div>
    </div>
  <% end %>

  <!-- Progress indicators -->
  <div class="flex items-center justify-center gap-6 text-sm">
    <div class="flex items-center gap-2 <%= import.pending? || import.processing? ? 'text-cyan-600 dark:text-cyan-400' : ui_text_subtle_class %>">
      <div class="w-2 h-2 rounded-full <%= import.pending? ? 'bg-cyan-500 animate-pulse' : 'bg-emerald-500' %>"></div>
      <span>Upload</span>
    </div>
    <div class="w-8 h-px bg-slate-200 dark:bg-slate-700"></div>
    <div class="flex items-center gap-2 <%= import.processing? ? 'text-cyan-600 dark:text-cyan-400' : ui_text_subtle_class %>">
      <div class="w-2 h-2 rounded-full <%= import.processing? ? 'bg-cyan-500 animate-pulse' : 'bg-slate-300 dark:bg-slate-600' %>"></div>
      <span>Extract</span>
    </div>
    <div class="w-8 h-px bg-slate-200 dark:bg-slate-700"></div>
    <div class="flex items-center gap-2 <%= ui_text_subtle_class %>">
      <div class="w-2 h-2 rounded-full bg-slate-300 dark:bg-slate-600"></div>
      <span>Review</span>
    </div>
  </div>
<% else %>
  <!-- Signal to stop polling - status is complete or failed -->
  <div data-poll-complete="true"></div>
<% end %>
</div>
